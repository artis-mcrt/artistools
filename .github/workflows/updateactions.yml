---
name: Version Updater

on:
    schedule:
    # Automatically run every day
        - cron: 30 * * * *

jobs:
    update-ghactions:
        runs-on: ubuntu-latest

        steps:
            - uses: actions/checkout@v3
              with:
          # [Required] Access token with `workflow` scope.
                  token: ${{ secrets.artismcrtupdatertoken }}

            - name: Run GitHub Actions Version Updater
              uses: saadmk11/github-actions-version-updater@v0.7.4
              with:
          # [Required] Access token with `workflow` scope.
                  token: ${{ secrets.artismcrtupdatertoken }}
    update-pre-commit:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v2

            - name: Set up Python
              uses: actions/setup-python@v2
              with:
                  python-version: 3.8

            - name: Install pre-commit
              run: pip install pre-commit

            - name: Run pre-commit autoupdate
              run: pre-commit autoupdate

            - name: Create Pull Request
              uses: peter-evans/create-pull-request@v2
              with:
                  token: ${{ secrets.artismcrtupdatertoken }}
                  branch: update/pre-commit-autoupdate
                  title: Auto-update pre-commit hooks
                  commit-message: Auto-update pre-commit hooks
                  body: |
                      Update versions of tools in pre-commit
                      configs to latest version
                  labels: dependencies
